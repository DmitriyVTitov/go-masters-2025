–í Go –º—å—é—Ç–µ–∫—Å—ã (mutexes) –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –¥–ª—è **–±–µ–∑–æ–ø–∞—Å–Ω–æ–≥–æ –¥–æ—Å—Ç—É–ø–∞ –∫ –æ–±—â–∏–º –¥–∞–Ω–Ω—ã–º** –∏–∑ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö –≥–æ—Ä—É—Ç–∏–Ω, –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞—è **–≥–æ–Ω–∫–∏ –¥–∞–Ω–Ω—ã—Ö** (data races) –∏ –æ–±–µ—Å–ø–µ—á–∏–≤–∞—è **–∫–æ–Ω—Å–∏—Å—Ç–µ–Ω—Ç–Ω–æ—Å—Ç—å —Å–æ—Å—Ç–æ—è–Ω–∏—è**. –û–Ω–∏ —è–≤–ª—è—é—Ç—Å—è —á–∞—Å—Ç—å—é –ø–∞–∫–µ—Ç–∞ `sync`.

---

## üîπ **–ö–æ–≥–¥–∞ –Ω—É–∂–Ω—ã –º—å—é—Ç–µ–∫—Å—ã?**
–ú—å—é—Ç–µ–∫—Å—ã –ø—Ä–∏–º–µ–Ω—è—é—Ç—Å—è, –∫–æ–≥–¥–∞:
1. **–ù–µ—Å–∫–æ–ª—å–∫–æ –≥–æ—Ä—É—Ç–∏–Ω —á–∏—Ç–∞—é—Ç –∏ –ø–∏—à—É—Ç –≤ –æ–¥–Ω—É –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é** (–Ω–∞–ø—Ä–∏–º–µ—Ä, —Å—á—ë—Ç—á–∏–∫, –∫—ç—à, —Å—Ç—Ä—É–∫—Ç—É—Ä—É –¥–∞–Ω–Ω—ã—Ö).
2. **–¢—Ä–µ–±—É–µ—Ç—Å—è –∞—Ç–æ–º–∞—Ä–Ω–æ–µ –∏–∑–º–µ–Ω–µ–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è** (–Ω–∞–ø—Ä–∏–º–µ—Ä, –±–∞–Ω–∫–æ–≤—Å–∫–∏–π –ø–µ—Ä–µ–≤–æ–¥).
3. **–ö–∞–Ω–∞–ª—ã –Ω–µ—É–¥–æ–±–Ω—ã –∏–ª–∏ –∏–∑–±—ã—Ç–æ—á–Ω—ã** (–Ω–∞–ø—Ä–∏–º–µ—Ä, –¥–ª—è –∑–∞—â–∏—Ç—ã —Ä–µ–¥–∫–∏—Ö –∑–∞–ø–∏—Å–µ–π –≤ –º–∞–ø—É).

---

## üîπ **–¢–∏–ø—ã –º—å—é—Ç–µ–∫—Å–æ–≤ –≤ Go**
### 1. **`sync.Mutex` (–æ–±—ã—á–Ω—ã–π –º—å—é—Ç–µ–∫—Å)**
   - –ë–ª–æ–∫–∏—Ä—É–µ—Ç –¥–æ—Å—Ç—É–ø –¥–ª—è –≤—Å–µ—Ö –≥–æ—Ä—É—Ç–∏–Ω, –∫—Ä–æ–º–µ –æ–¥–Ω–æ–π.
   - –ü—Ä–∏–º–µ—Ä:
     ```go
     package main

     import (
         "fmt"
         "sync"
     )

     type SafeCounter struct {
         mu    sync.Mutex
         value int
     }

     func (c *SafeCounter) Increment() {
         c.mu.Lock()         // –ë–ª–æ–∫–∏—Ä—É–µ–º –¥–æ—Å—Ç—É–ø
         defer c.mu.Unlock() // –†–∞–∑–±–ª–æ–∫–∏—Ä—É–µ–º –ø—Ä–∏ –≤—ã—Ö–æ–¥–µ
         c.value++
     }

     func main() {
         counter := SafeCounter{}
         var wg sync.WaitGroup

         for i := 0; i < 1000; i++ {
             wg.Add(1)
             go func() {
                 counter.Increment()
                 wg.Done()
             }()
         }

         wg.Wait()
         fmt.Println("–ò—Ç–æ–≥–æ–≤–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ:", counter.value) // 1000
     }
     ```

### 2. **`sync.RWMutex` (—á–∏—Ç–∞—é—â–∏–π-–ø–∏—Å–∞—é—â–∏–π –º—å—é—Ç–µ–∫—Å)**
   - –ü–æ–∑–≤–æ–ª—è–µ—Ç **–º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω–æ–µ —á—Ç–µ–Ω–∏–µ** –Ω–æ **—ç–∫—Å–∫–ª—é–∑–∏–≤–Ω—É—é –∑–∞–ø–∏—Å—å**.
   - –≠—Ñ—Ñ–µ–∫—Ç–∏–≤–µ–Ω, –∫–æ–≥–¥–∞ —á—Ç–µ–Ω–∏–π –±–æ–ª—å—à–µ, —á–µ–º –∑–∞–ø–∏—Å–µ–π.
   - –ü—Ä–∏–º–µ—Ä:
     ```go
     type Cache struct {
         mu    sync.RWMutex
         items map[string]string
     }

     func (c *Cache) Get(key string) string {
         c.mu.RLock()         // –ë–ª–æ–∫–∏—Ä–æ–≤–∫–∞ –¥–ª—è —á—Ç–µ–Ω–∏—è
         defer c.mu.RUnlock() // –†–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–∫–∞
         return c.items[key]
     }

     func (c *Cache) Set(key, value string) {
         c.mu.Lock()          // –≠–∫—Å–∫–ª—é–∑–∏–≤–Ω–∞—è –±–ª–æ–∫–∏—Ä–æ–≤–∫–∞
         defer c.mu.Unlock()
         c.items[key] = value
     }
     ```

---

## üîπ **–ü–æ—á–µ–º—É –Ω–µ –≤—Å–µ–≥–¥–∞ –∫–∞–Ω–∞–ª—ã?**
–ö–∞–Ω–∞–ª—ã ‚Äî —ç—Ç–æ –∏–¥–∏–æ–º–∞—Ç–∏—á–Ω—ã–π —Å–ø–æ—Å–æ–± –æ–±—â–µ–Ω–∏—è –≥–æ—Ä—É—Ç–∏–Ω, –Ω–æ:
- **–ú—å—é—Ç–µ–∫—Å—ã –ø—Ä–æ—â–µ** –¥–ª—è –∑–∞—â–∏—Ç—ã –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–π –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π.
- **–ö–∞–Ω–∞–ª—ã –∏–∑–±—ã—Ç–æ—á–Ω—ã** –¥–ª—è –ø—Ä–æ—Å—Ç—ã—Ö –æ–ø–µ—Ä–∞—Ü–∏–π (–Ω–∞–ø—Ä–∏–º–µ—Ä, –∏–Ω–∫—Ä–µ–º–µ–Ω—Ç —Å—á—ë—Ç—á–∏–∫–∞).
- **–ú—å—é—Ç–µ–∫—Å—ã –º–æ–≥—É—Ç –±—ã—Ç—å –±—ã—Å—Ç—Ä–µ–µ** –≤ –≤—ã—Å–æ–∫–æ–Ω–∞–≥—Ä—É–∂–µ–Ω–Ω—ã—Ö —Å—Ü–µ–Ω–∞—Ä–∏—è—Ö.

> **–ü—Ä–∞–≤–∏–ª–æ:** *"–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –∫–∞–Ω–∞–ª—ã –¥–ª—è –∫–æ–æ—Ä–¥–∏–Ω–∞—Ü–∏–∏, –º—å—é—Ç–µ–∫—Å—ã –¥–ª—è –∑–∞—â–∏—Ç—ã —Å–æ—Å—Ç–æ—è–Ω–∏—è"* (Rob Pike).

---

## üîπ **–û–ø–∞—Å–Ω–æ—Å—Ç–∏ –º—å—é—Ç–µ–∫—Å–æ–≤**
1. **–í–∑–∞–∏–º–Ω–∞—è –±–ª–æ–∫–∏—Ä–æ–≤–∫–∞ (deadlock)**:
   ```go
   var mu sync.Mutex
   mu.Lock()
   mu.Lock() // –ü—Ä–æ–≥—Ä–∞–º–º–∞ –∑–∞–≤–∏—Å–Ω–µ—Ç
   ```
2. **–ó–∞–±—ã—Ç–∞—è —Ä–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–∫–∞**:
   ```go
   mu.Lock()
   if err != nil {
       return // –ó–∞–±—ã–ª–∏ Unlock!
   }
   mu.Unlock()
   ```
   **–†–µ—à–µ–Ω–∏–µ:** –í—Å–µ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ `defer mu.Unlock()`.

---

## üîπ **–ö–æ–≥–¥–∞ –º—å—é—Ç–µ–∫—Å—ã –Ω–µ –Ω—É–∂–Ω—ã?**
1. **–î–∞–Ω–Ω—ã–µ —Ç–æ–ª—å–∫–æ —á–∏—Ç–∞—é—Ç—Å—è** (–±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π).
2. **–ö–∞–∂–¥–∞—è –≥–æ—Ä—É—Ç–∏–Ω–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç —Å–æ —Å–≤–æ–µ–π –∫–æ–ø–∏–µ–π –¥–∞–Ω–Ω—ã—Ö**.
3. **–ê—Ç–æ–º–∞—Ä–Ω—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏** (–Ω–∞–ø—Ä–∏–º–µ—Ä, `atomic.AddInt64`).

---

## üîπ **–í—ã–≤–æ–¥**
- **–ú—å—é—Ç–µ–∫—Å—ã** –≤ Go –∑–∞—â–∏—â–∞—é—Ç –æ–±—â–∏–µ —Ä–µ—Å—É—Ä—Å—ã –æ—Ç –≥–æ–Ω–æ–∫.
- **`sync.Mutex`** ‚Äî –¥–ª—è —ç–∫—Å–∫–ª—é–∑–∏–≤–Ω–æ–≥–æ –¥–æ—Å—Ç—É–ø–∞.
- **`sync.RWMutex`** ‚Äî –¥–ª—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ —á–∞—Å—Ç—ã—Ö —á—Ç–µ–Ω–∏–π.
- **–ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤—ã:** –ö–∞–Ω–∞–ª—ã, `atomic`, –∏–º–º—É—Ç–∞–±–µ–ª—å–Ω—ã–µ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã.

–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –º—å—é—Ç–µ–∫—Å—ã –∞–∫–∫—É—Ä–∞—Ç–Ω–æ, —á—Ç–æ–±—ã –∏–∑–±–µ–∂–∞—Ç—å deadlock –∏ —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å! üîí